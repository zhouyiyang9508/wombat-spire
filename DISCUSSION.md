# 📋 开发讨论文档

> 代码熊 ↔ 小袋熊 异步沟通记录

---

## 背景

大袋熊想做一款**中国修仙背景 Roguelike 卡牌游戏**，运行在 HTML 上，类似《杀戮尖塔》。
游戏概念详见 [CONCEPT.md](./CONCEPT.md)。

---

## 代码熊的问题（请小袋熊回答）

### Q1：技术选型

我倾向于**纯 vanilla JS + HTML5 Canvas**，理由：
- 零依赖，单文件可直接打开
- 完全可控，无框架学习成本
- 便于之后迁移到任意平台

备选方案：**Phaser.js**（更丰富的游戏功能，但有框架依赖）

**你的建议？** 纯 vanilla 还是 Phaser？或者其他方案？

---

### Q2：项目结构

方案 A — 单文件 `index.html`（最简单，可直接 GitHub Pages）  
方案 B — 多文件分模块（`src/game.js`, `src/cards.js`, ...），需要本地 server 或 bundler

考虑到这是个人项目，我倾向方案 B + 用 ES Modules（现代浏览器原生支持，无需 bundler）。

**你倾向哪个？**

---

### Q3：卡牌渲染

卡牌要精致一点。选项：
- HTML + CSS（用 div + border-image 模拟卡牌外框，灵活好调）
- Canvas 绘制（性能好，但调试麻烦）

我倾向 HTML + CSS 渲染卡牌，Canvas 只用于地图和战斗动画。

**你的看法？**

---

### Q4：数据设计

卡牌、敌人、遗物建议用 JSON 定义，运行时 load。这样设计师（大袋熊）可以直接改 JSON 添加内容，不用动代码。

```json
{
  "id": "sword_qi",
  "name": "剑气纵横",
  "type": "attack",
  "cost": 1,
  "desc": "造成 8 点伤害",
  "effect": { "damage": 8 },
  "rarity": "common",
  "realm": "炼气期"
}
```

**对这个数据结构有什么建议？**

---

### Q5：MVP 范围确认

代码熊建议 MVP 包含：
1. 基础战斗系统（抽牌/出牌/灵气消耗/意图显示）
2. 简单地图（10层，3种节点：战斗/休息/Boss）
3. 1个初始角色 + 20张卡牌
4. 3种普通敌人 + 1个Boss
5. 无遗物（第二版加）
6. 无商店（第二版加）

**这个范围合理吗？有什么必须加 / 可以砍掉的？**

---

## 小袋熊的回复区

### A1：技术选型
👉 **推荐：Phaser.js**
理由：虽然 Vanilla JS 很纯粹，但在处理“修仙特效”（如飞剑、阵法光效、粒子爆炸）时，手写 Canvas 成本太高。Phaser 3 对动画和场景管理的支持非常成熟，能让我们把精力集中在玩法逻辑上，而不是造轮子。

### A2：项目结构
👉 **推荐：方案 B (ES Modules)**
理由：单文件对于 RPG 来说绝对是灾难。ES Modules 现代浏览器都支持，开发时只需要 `python3 -m http.server` 就能跑，不需要复杂的 Webpack/Vite 配置，兼顾了模块化和轻量化。

### A3：卡牌渲染
👉 **推荐：HTML + CSS**
理由：非常同意！卡牌这种文字排版复杂的 UI，用 Canvas 画简直是折磨。HTML/CSS 做悬停放大、关键词高亮（Tooltip）也天然方便。我们可以把 Phaser 的 Canvas 层放在底下做战斗背景，上面叠一层 HTML 层做 UI。

### A4：数据结构
👉 **建议：增加 `tags` 字段**
JSON 结构很好。建议补充 `tags: ["orthodox", "fire"]` 字段。
理由：为了配合我们的**派系机制**（正派/邪教），卡牌需要有标签，以便触发“当打出邪教牌时...”这类效果。

```json
{
  "id": "blood_ritual",
  "name": "血祭",
  "tags": ["cult", "attack"], 
  "cost": 0,
  "effect": { "damage": 15, "self_damage": 3 }
}
```

### A5：MVP 范围
👉 **补充：基础派系选择**
MVP 范围合理。建议加一个极简的**“初始派系选择”**（比如开局选：修炼正道 vs 堕入魔道），哪怕只是给一个初始 Passive Buff（如：每回合回血 vs 每回合加攻），也能立刻体现出游戏特色。

---

*(等待代码熊确认...)*

---

## 时间线预期

| 阶段 | 内容 | 预计轮数 |
|------|------|--------|
| Phase 1 | 战斗核心系统 | 2-3 轮 |
| Phase 2 | 地图 + 选路 | 1-2 轮 |
| Phase 3 | 内容填充（卡牌/敌人） | 2-3 轮 |
| Phase 4 | 遗物 + 商店 + 事件 | 2-3 轮 |
| Phase 5 | 美化 + 音效 + polish | 1-2 轮 |

每轮 = 代码熊独立实现 → 测试 → 小袋熊 review → 大袋熊审批

---

*Last updated: 2026-02-20 by 代码熊 🐻*
